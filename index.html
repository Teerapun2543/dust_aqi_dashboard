<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/justgage@1.4.0/justgage.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/raphael@2.3.0/raphael.min.js"></script>
  <script type="module" src="script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/justgage@1.4.0/justgage.min.js"></script>
  <!-- р╣Ар╕Юр╕┤р╣Ир╕бр╕Бр╕▓р╕гр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╕Бр╕▒р╕Ъ Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="fonts/THSarabunNew-normal.js"></script>


  <title>р╕гр╕░р╕Ър╕Ър╕Хр╕гр╕зр╕Ир╕зр╕▒р╕Фр╣Бр╕ер╕░р╕Хр╕┤р╕Фр╕Хр╕▓р╕бр╕Др╕╕р╕Ур╕ар╕▓р╕Юр╕нр╕▓р╕Бр╕▓р╕ир╣Гр╕Щр╣Вр╕гр╕Зр╕Зр╕▓р╕Щр╕Др╕нр╕Щр╕Бр╕гр╕╡р╕Хр╕Ьр╕кр╕бр╣Ар╕кр╕гр╣Зр╕И</title>

 <!-- р╣Ар╕Кр╕╖р╣Ир╕нр╕бр╣Вр╕вр╕Зр╣Др╕Яр╕ер╣М CSS -->
 <link rel="stylesheet" href="styles.css" /></head>
<body>

  <!-- Header Section -->
  <header>
    <div style="display: flex; align-items: center; justify-content: center; gap: 15px; flex-wrap: wrap;">
      <img src="images/logospu.png" alt="р╣Вр╕ер╣Вр╕Бр╣Йр╕бр╕лр╕▓р╕зр╕┤р╕Чр╕вр╕▓р╕ер╕▒р╕в" style="height: 150px;" />
      <div>
        <h1>р╕гр╕░р╕Ър╕Ър╕Хр╕гр╕зр╕Ир╕зр╕▒р╕Фр╣Бр╕ер╕░р╕Хр╕┤р╕Фр╕Хр╕▓р╕бр╕Др╕╕р╕Ур╕ар╕▓р╕Юр╕нр╕▓р╕Бр╕▓р╕ир╣Гр╕Щр╣Вр╕гр╕Зр╕Зр╕▓р╕Щр╕Др╕нр╕Щр╕Бр╕гр╕╡р╕Хр╕Ьр╕кр╕бр╣Ар╕кр╕гр╣Зр╕И</h1>
        <p>"р╣Ар╕Эр╣Йр╕▓р╕гр╕░р╕зр╕▒р╕Зр╕Эр╕╕р╣Ир╕Щр╕ер╕░р╕нр╕нр╕З р╣Ар╕Юр╕╖р╣Ир╕нр╕кр╕┤р╣Ир╕Зр╣Бр╕зр╕Фр╕ер╣Йр╕нр╕бр╕Чр╕╡р╣Ир╕Ыр╕ер╕нр╕Фр╕ар╕▒р╕вр╣Гр╕Щр╣Вр╕гр╕Зр╕Зр╕▓р╕Щр╕Др╕нр╕Щр╕Бр╕гр╕╡р╕Х"</p>
      </div>
    </div>
  </header>

  <!-- Navigation Menu -->
  <nav>
    <a href="#">р╕лр╕Щр╣Йр╕▓р╕лр╕ер╕▒р╕Б</a>
    <a href="#">р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ыр╕▒р╕Ир╕Ир╕╕р╕Ър╕▒р╕Щ</a>
    <a href="#">р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕вр╣Йр╕нр╕Щр╕лр╕ер╕▒р╕З</a>
    <a href="#">р╣Бр╕Ьр╕Щр╕Чр╕╡р╣Ир╣Ар╕Лр╕Щр╣Ар╕Лр╕нр╕гр╣М</a>
    <a href="#">р╣Ар╕Бр╕╡р╣Ир╕вр╕зр╕Бр╕▒р╕Ър╣Вр╕Др╕гр╕Зр╕Бр╕▓р╕г</a>
    <a href="#">р╕Хр╕┤р╕Фр╕Хр╣Ир╕нр╣Ар╕гр╕▓</a>
  </nav>

  <!-- Main Content -->
  <main>
    <section class="card">
      <div style="display: flex; flex-wrap: wrap; justify-content: space-between; gap: 20px;">
        <div style="flex: 2; min-width: 280px;">
          <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
            <div class="flex-item">
              <div id="gauge-pm25" style="height: 200px;"></div>
              <div>ЁЯМля╕П PM2.5</div>
            </div>
            <div class="flex-item">
              <div id="gauge-pm10" style="height: 200px;"></div>
              <div>ЁЯМля╕П PM10</div>
            </div>
            <div class="flex-item">
              <div id="gauge-temp" style="height: 200px;"></div>
              <div>ЁЯМб Temp</div>
            </div>
            <div class="flex-item">
              <div id="gauge-humidity" style="height: 200px;"></div>
              <div>ЁЯТз Humidity</div>
            </div>
          </div>
          <div class="flex-item" style="margin-top: 15px;">
            ЁЯЫС Status Pump: <span id="pump-status">--</span>
          </div>
        </div>
        <div style="flex: 1; min-width: 220px;">
          <div id="aqi-card" style="background: #fff3cd; border-radius: 12px; padding: 15px; color: #333; font-family: 'Arial', sans-serif; box-shadow: 0 2px 6px rgba(0,0,0,0.1); text-align: center;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
              <div>
                <div id="aqi-value" style="font-size: 28px; font-weight: bold;">--</div>
                <div style="font-size: 14px;">US AQI</div>
              </div>
              <div id="aqi-emoji" style="display: flex; justify-content: center; align-items: center;">
                <img id="emoji-img" src="images/good.png" alt="AQI Icon" />
              </div>
              
              
            </div>
            <div id="aqi-level" style="font-size: 18px; margin: 8px 0;">--</div>
            <div class="pm-value"><strong>PM2.5:</strong> <span id="aqi-pm">--</span> ┬╡g/m┬│</div><div id="sensor-info" style="margin-top: 12px; font-size: 16px; text-align: center; color: #333;">
              ЁЯХТ р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕ер╣Ир╕▓р╕кр╕╕р╕Ф: <span id="last-updated">--:--</span><br />
              ЁЯУб р╕кр╕Цр╕▓р╕Щр╕░р╣Ар╕Лр╕Щр╣Ар╕Лр╕нр╕гр╣М: <span id="sensor-status">--</span>
            </div>
            
          </div>
          
          <!-- р╣Ар╕Юр╕┤р╣Ир╕бр╕кр╣Ир╕зр╕Щр╕Щр╕╡р╣Йр╣Гр╕Хр╣Й AQI Card -->
<section class="aqi-status">
  <h2>ЁЯУЛ р╕Хр╕▓р╕гр╕▓р╕Зр╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕ер╣Ир╕▓р╕кр╕╕р╕Ф </h2>
  <table id="data-table">
    <thead>
      <tr>
        <th>р╣Ар╕зр╕ер╕▓</th>
        <th>PM2.5 (┬╡g/m┬│)</th>
        <th>PM10 (┬╡g/m┬│)</th>
        <th>р╕нр╕╕р╕Ур╕лр╕ар╕╣р╕бр╕┤ (┬░C)</th>
        <th>р╕Др╕зр╕▓р╕бр╕Кр╕╖р╣Йр╕Щ (%)</th>
        <th>р╕кр╕Цр╕▓р╕Щр╕░р╕Ыр╕▒р╣Кр╕б</th>
      </tr>
    </thead>
    <tbody id="table-body">
      <!-- р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕░р╕Цр╕╣р╕Бр╣Ар╕Хр╕┤р╕бр╕Фр╣Йр╕зр╕в JS -->
    </tbody>
  </table>
</section>

          <div style="text-align: right; margin-top: 10px;">
            <button onclick="openHistoryModal()">ЁЯУК р╕Фр╕╣р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕вр╣Йр╕нр╕Щр╕лр╕ер╕▒р╕З</button>
          </div>
        </div>
      </div>
    <!-- Summary Section -->
    <section class="card">
      <h2 style="display: flex; align-items: center; gap: 10px; font-size: 1.5em; margin-bottom: 20px;">
        <span style="font-size: 1.4em;">ЁЯУК</span> 
        <span>р╕гр╕▓р╕вр╕Зр╕▓р╕Щр╕кр╕Цр╕┤р╕Хр╕┤р╕Др╕╕р╕Ур╕ар╕▓р╕Юр╕нр╕▓р╕Бр╕▓р╕ир╕вр╣Йр╕нр╕Щр╕лр╕ер╕▒р╕З 24 р╕Кр╕▒р╣Ир╕зр╣Вр╕бр╕З</span>
      </h2>

      <div class="dashboard" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px;">
        <div class="card"><h3>ЁЯМл р╕Др╣Ир╕▓р╣Ар╕Йр╕ер╕╡р╣Ир╕в PM2.5</h3><div class="value" id="avg-pm25">--</div></div>
        <div class="card"><h3>ЁЯМл р╕Др╣Ир╕▓р╣Ар╕Йр╕ер╕╡р╣Ир╕в PM10</h3><div class="value" id="avg-pm10">--</div></div>
        <div class="card"><h3>ЁЯМб р╕нр╕╕р╕Ур╕лр╕ар╕╣р╕бр╕┤р╣Ар╕Йр╕ер╕╡р╣Ир╕в</h3><div class="value" id="avg-temp">--</div></div>
        <div class="card"><h3>ЁЯТз р╕Др╕зр╕▓р╕бр╕Кр╕╖р╣Йр╕Щр╕кр╕▒р╕бр╕Юр╕▒р╕Чр╕Шр╣М</h3><div class="value" id="avg-humidity">--</div></div>
        <div class="card"><h3>ЁЯФ║ PM2.5 р╕кр╕╣р╕Зр╕кр╕╕р╕Ф</h3><div class="value" id="max-pm25">--</div></div>
        <div class="card"><h3>ЁЯФ╗ PM2.5 р╕Хр╣Ир╕│р╕кр╕╕р╕Ф</h3><div class="value" id="min-pm25">--</div></div>

      </div>

      <div class="alert-bar" id="exceed-alert">
        <span style="color: #9c2d2d; font-weight: bold;">ЁЯЯе р╣Ар╕Бр╕┤р╕Щр╕Др╣Ир╕▓р╕бр╕▓р╕Хр╕гр╕Рр╕▓р╕Щ</span>
        <span style="font-weight: bold;">PM2.5: <span id="exceed-pm25">--</span> р╕Др╕гр╕▒р╣Йр╕З</span> |
        <span style="font-weight: bold;">PM10: <span id="exceed-pm10">--</span> р╕Др╕гр╕▒р╣Йр╕З</span>
      </div>
      
      

      <div class="footer" style="text-align: center; font-size: 0.95rem; color: #555;">
       ЁЯУЕ р╕зр╕▒р╕Щр╕Чр╕╡р╣И: <span id="latest-date">--</span>
      </div>
      
    </section>
  </main>

  <!-- тЬЕ р╕кр╣Ир╕зр╕Щр╣Бр╕кр╕Фр╕Зр╕Бр╕гр╕▓р╕Яр╕вр╣Йр╕нр╕Щр╕лр╕ер╕▒р╕З -->
<section class="card chart">
  <h2>ЁЯУК р╕Бр╕гр╕▓р╕Яр╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╣Бр╕Щр╕зр╣Вр╕Щр╣Йр╕бр╕Др╕╕р╕Ур╕ар╕▓р╕Юр╕нр╕▓р╕Бр╕▓р╕ир╕вр╣Йр╕нр╕Щр╕лр╕ер╕▒р╕З</h2>
  <div>
    <button class="time-btn" data-hours="1">1 р╕Кр╕▒р╣Ир╕зр╣Вр╕бр╕З</button>
    <button class="time-btn" data-hours="6">6 р╕Кр╕▒р╣Ир╕зр╣Вр╕бр╕З</button>
    <button class="time-btn" data-hours="24">24 р╕Кр╕▒р╣Ир╕зр╣Вр╕бр╕З</button>
    <button class="time-btn" data-hours="168">7 р╕зр╕▒р╕Щ</button>
  </div>
  <div id="history-loading" style="display:none; text-align:center;">тП│ р╕Бр╕│р╕ер╕▒р╕Зр╣Вр╕лр╕ер╕Фр╕Вр╣Йр╕нр╕бр╕╣р╕е...</div>
  </div>
  
  
  <!-- ЁЯУЕ Date Picker -->
  <div style="margin: 10px 0;">
    <label for="datePicker">р╣Ар╕ер╕╖р╕нр╕Бр╕зр╕▒р╕Щр╕Чр╕╡р╣И ЁЯУЕ</label>
    <input type="date" id="datePicker" style="padding: 5px;" />
  </div>
  
  <!-- ЁЯУе р╣Ар╕бр╕Щр╕╣р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Ф -->
  <div style="margin-bottom: 10px;">
    <label for="downloadSelect"><strong>ЁЯУе р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕вр╣Йр╕нр╕Щр╕лр╕ер╕▒р╕З:</strong></label>
    <select id="downloadSelect" style="margin-left:10px; padding:5px;">
      <option value="">-- р╣Ар╕ер╕╖р╕нр╕Бр╕Ыр╕гр╕░р╣Ар╕ар╕Чр╣Др╕Яр╕ер╣М --</option>
      <option value="csv">CSV ЁЯУК</option>
      <option value="pdf">PDF ЁЯУД</option>
     

    </select>
    
  </div>
  
  <canvas id="historyChart" style="max-height:300px; width:100%; background:white; border-radius:10px;"></canvas>
  </section>
  
  
  
  <!-- р╣Бр╕Ьр╕Щр╕Чр╕╡р╣Ир╣Ар╕Лр╕Щр╣Ар╕Лр╕нр╕гр╣М -->
  <section class="card sensor-map">
  <h2>ЁЯЧ║ р╕Хр╕│р╣Бр╕лр╕Щр╣Ир╕Зр╕Чр╕╡р╣Ир╕Хр╕▒р╣Йр╕Зр╕гр╕░р╕Ър╕Ър╕Хр╕гр╕зр╕Ир╕зр╕▒р╕Фр╣Бр╕ер╕░р╕Хр╕┤р╕Фр╕Хр╕▓р╕бр╕Др╕╕р╕Ур╕ар╕▓р╕Юр╕нр╕▓р╕Бр╕▓р╕и</h2>
  <div style="height: 300px; border-radius: 10px; overflow: hidden;">
    <iframe
      src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3875.790726255974!2d100.73778127485552!3d13.731116286658619!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x311d6705010b8dc5%3A0x69accc2f9c92dd0!2z4LmB4Lie4Lil4LmJ4LiZ4LiX4LmM4Lil4Liy4LiU4LiB4Lij4Liw4Lia4Lix4LiHIEFDUA!5e0!3m2!1sen!2sth!4v1745937370950!5m2!1sen!2sth"
      width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
    </iframe>
  </div>
  <div style="margin-top: 10px;">
    <a href="https://maps.app.goo.gl/JKTyXNTdbFWQvKTu7" target="_blank">
      <button>р╣Ар╕Ыр╕┤р╕Фр╣Гр╕Щ Google Maps ЁЯУН</button>
    </a>
  </div>
  </section>
  
   <!-- р╕Хр╕▓р╕гр╕▓р╕З AQI -->
   <section class="aqi-status">
    <h2>ЁЯУЛ р╕бр╕▓р╕Хр╕гр╕Рр╕▓р╕Щр╣Бр╕ер╕░р╣Ар╕Бр╕Ур╕Ср╣Мр╕Ыр╕гр╕░р╣Ар╕бр╕┤р╕Щр╕Фр╕▒р╕Кр╕Щр╕╡р╕Др╕╕р╕Ур╕ар╕▓р╕Юр╕нр╕▓р╕Бр╕▓р╕и (AQI)</h2>
    <table>
      <thead>
        <tr>
          <th>AQI</th><th>PM2.5 (┬╡g/m┬│)</th><th>PM10 (┬╡g/m┬│)</th><th>р╕Ьр╕ер╕Бр╕гр╕░р╕Чр╕Ър╕Хр╣Ир╕нр╕кр╕╕р╕Вр╕ар╕▓р╕Ю</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>0-25 ЁЯЯж</td><td>0-25</td><td>0-50</td><td>р╕Др╕╕р╕Ур╕ар╕▓р╕Юр╕нр╕▓р╕Бр╕▓р╕ир╕Фр╕╡р╕бр╕▓р╕Б</td></tr>
        <tr><td>26-50 ЁЯЯй</td><td>26-37</td><td>51-80</td><td>р╕Др╕╕р╕Ур╕ар╕▓р╕Юр╕нр╕▓р╕Бр╕▓р╕ир╕Фр╕╡</td></tr>
        <tr><td>51-100 ЁЯЯи</td><td>38-50</td><td>81-120</td><td>р╕бр╕╡р╕Ьр╕ер╕Хр╣Ир╕нр╕кр╕╕р╕Вр╕ар╕▓р╕Юр╣Ар╕ер╣Зр╕Бр╕Щр╣Йр╕нр╕в</td></tr>
        <tr><td>101-200 ЁЯЯз</td><td>51-90</td><td>121-180</td><td>р╣Ар╕гр╕┤р╣Ир╕бр╕бр╕╡р╕Ьр╕ер╕Хр╣Ир╕нр╕кр╕╕р╕Вр╕ар╕▓р╕Ю</td></tr>
        <tr><td>>200 ЁЯЯе</td><td>91+</td><td>181+</td><td>р╕нр╕▒р╕Щр╕Хр╕гр╕▓р╕вр╕Хр╣Ир╕нр╕кр╕╕р╕Вр╕ар╕▓р╕Ю</td></tr>
      </tbody>
    </table>
  </section>
  <!-- ЁЯФ╜ Modal р╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕вр╣Йр╕нр╕Щр╕лр╕ер╕▒р╕З -->
  <div id="historyModal" style="
    display:none;
    position: fixed;
    top: 10%;
    left: 50%;
    transform: translateX(-50%);
    width: 90%;
    max-width: 800px;
    background: white;
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 0 10px rgba(0,0,0,0.25);
    z-index: 9999;
    overflow-y: auto;
    max-height: 80vh;
  ">
    <h2>р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕вр╣Йр╕нр╕Щр╕лр╕ер╕▒р╕З</h2>
    <div style="margin-bottom: 10px;">
      <label for="modalDatePicker">р╣Ар╕ер╕╖р╕нр╕Бр╕зр╕▒р╕Щр╕Чр╕╡р╣И: </label>
      <input type="date" id="modalDatePicker" />
    </div>
    <table style="width: 100%; border-collapse: collapse;">
      <thead>
        <tr>
          <th>р╣Ар╕зр╕ер╕▓</th><th>PM2.5</th><th>PM10</th><th>р╕нр╕╕р╕Ур╕лр╕ар╕╣р╕бр╕┤ (┬░C)</th><th>р╕Др╕зр╕▓р╕бр╕Кр╕╖р╣Йр╕Щ (%)</th><th>р╕Ыр╕▒р╣Кр╕б</th><th>р╕кр╕Цр╕▓р╕Щр╕░р╕нр╕▓р╕Бр╕▓р╕и</th>
        </tr>
      </thead>
      <tbody id="historyTableBody">
        <!-- ЁЯз╛ р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕░р╕Цр╕╣р╕Бр╣Ар╕Хр╕┤р╕бр╕Фр╣Йр╕зр╕в JS -->
      </tbody>
    </table>
    <div style="text-align: right; margin-top: 10px;">
      <button onclick="document.getElementById('historyModal').style.display='none'">тЭМ р╕Ыр╕┤р╕Ф</button>
    </div>
  </div>
  
  </main>

 <!-- р╣Ар╕Кр╕╖р╣Ир╕нр╕бр╣Вр╕вр╕Зр╣Др╕Яр╕ер╣М JavaScript -->
 <script src="script.js"></script>

</body>
</html>
